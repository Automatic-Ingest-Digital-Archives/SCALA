# SCALA IP Ingestion Manual

This manual provides step-by-step instructions for getting your archival data into an AIP.
	
|Definition||
|----|----|
|TS|Transfer Set.</br>Folder containing all archival materials that are to be converted to an AIP.|
|SIP|Submission Information Package.</br>An E-ARK conform set of files that is offered to the e-depot.</br>A content producer creates one SIP from one TS.|
|AIP|Archival Information Package.</br>An E-ARK conform structure that stores the files in the SIP in the e-depot.|
|RODA-In|SIP creation software by KEEP SOLUTIONS.|
|RODA|AIP (re)ingestion browser tool by KEEP SOLUTIONS.|
|meemoo|Long term archival storage provider.|

There are instructions for Win10, Mac and Linux operating systems.

Text written in <span title="I have some extra information"><i>italic</i></span> has some extra information if you hover
over it.

[Instructions on how to use a terminal.](https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Using%20a%20terminal.md)

[Testing best practices.](https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Testing%20best%20practices.md)

## Pre-Ingestion

###
<details><summary><b>Archival data preparation</b></summary>

#### Create your TS

|Task||
|----|-----|
|Create your TS|Create a working folder (with a unique id) with your essence or data that needs to be transformed in a SIP. The folder contains the original files and files already migrated before ingestion.|
|Create and add a descriptive metadata file to your TS [optional]|Create a metadata XML-file which follows the instructions at Add descriptive metadata.|
|Create and add additional non-xml metadata [optional]|Create a folder called “_submissionDocumentation” in the root of the TS.</br><span title="E.g. file format identification files, file lists, etc."><i>Add additional non-xml metadata accompanying the content files</i></span>|

Advise: export niche formats / system dependant formats (e.g. google docs / google slides) to generic ones if possible. They need to be exported from that system using the most adequate formats, which may be complex on its own depending on if you want trueness to the original aspect (where you might use PDF to ensure fonts and layout are preserved) or you want reusability (where you might use Microsoft Office and/or OpenOffice formats to ensure files are editable). Also, you could download the same information in several formats and add all to the same SIP as alternative representations.

#### Extra <span title="With RODA-In, you can create basic SIPs for ingest into the SCALA repository. All Roda-In does is to create a descriptive metadata file with a METS-file, preserving fixity. You might want to do other steps before ingest. We give a short overview of these with the different options about the way with which you can achieve this. Bear in mind integrated pre-ingest tools like RMtool exist for more intensive pre-ingest operations."><i>data preparation tasks</i></span>

Here are optional but recommended tasks to execute before submitting a TS to RODA-In. Please execute your chosen tasks
in the order presented.

|Task|Win10|Mac/Linux|
|----|-----|---------|
|Unpack zipped files <span title="The SCALA digital repository does not unpack container files or zipped files, due to multiple possible issues. zip-files in the SIP will be zip-files in the AIP. If you want to unpack all ZIP-files you can do this before. However, be aware that this always requires some human control."><i>[optional]</i></span>|Open a terminal and run:</br><code>Expand-Archive -Path ".\*.zip"</code>,</br>where * is the name of the zip file.|Open a terminal and run:</br><code>unzip "*.zip" && ls -l</code>,</br>where * is the name of the zip file.|

|Task|Win10|
|----|-----|
|<span title="Trailing and leading whitespace in filenames causes RODA-In to crash in Windows."><i>Trim whitespace and trailing dots from filenames in Windows [optional]</i></span>|Manually trim whitespace from filenames.</br></br>OR run <a href="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/tree/main/Referenced%20Files/Scripts/RemoveWhitespaceFromDirsAndFiles.txt">this bash script</a> in a <b>Mac/Linux environment</b> in the root folder of your TS, before continuing on Windows.|

A backup, or data backup is a copy of computer data taken and stored elsewhere so that it may be used to restore the original after a data loss event. These files may be automatically generated by your operating system. Normally, such files are of no value to your TS.

|Task||
|----|-----|
|Remove backup files [optional]|<span title="Might be automated at some point."><i>Manually remove backup files.</i></span>|

A filelist is a text file containing all folders and files in your TS. A filetree contains the same information in a
more human readable form.

<img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Picture4.png">

If you are on Mac or Linux, you have to install the “tree” app. Windows has it installed by default.

|Task|Mac/Linux|
|----|---------|
|Install the “tree” app|Install on Mac</br>Open a terminal and run:</br><code>brew install tree</code></br></br>Install on Linux</br>Open a terminal and run:</br><code>sudo apt update && sudo apt-get install tree|

<span title="We may add more options for creating filelists/filetrees at a later stage: Create filelist using Treesize; Create filelist using Python os.module; + filelist / treetool in Bitcurator. Partners can add their own preferred methods. You can also create a filelist of the whole archive and include this in the documentation folder."><i>You can create a filelist and filetree for the root folder you are in using option 1. Alternatively, if you want to create filelists and filetrees for many TS’ at once, please follow option 2.</i></span>
	
|Task|Win10|Mac/Linux|
|----|-----|---------|
|Option 1: create a filelist and filetree for the current TS <span title="It's always handy to create a filelist about all the files in a SIP or in an archive. You can use this as an authoritative list of all the material received + as an inventory for researchers. This step is also recommended because Roda-in deletes without a log all empty folders. You should be able to restore the original file structure based on the filelist. Make sure the filelist lists files, folders and eventually symbolic links (hyperlinks to files stored elsewhere)."><i>[recommended]</i></span>|Open a terminal and run <a href="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/tree/main/Referenced%20Files/Scripts/create_filetree_filelist_powershell_option1.ps1">this script.</a>|On Linux, open a terminal and run <a href="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/tree/main/Referenced%20Files/Scripts/create_filetree_filelist_linux_bash_option1.txt">this script.</a></br></br>On Mac, open a terminal and run <a href="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/tree/main/Referenced%20Files/Scripts/create_filetree_filelist_mac_bash_option1.txt">this script.</a>|
|Option 2: create a filelist and filetree for each TS in the current root folder <span title="It's always handy to create a filelist about all the files in a SIP or in an archive. You can use this as an authoritative list of all the material received + as an inventory for researchers. This step is also recommended because Roda-in deletes without a log all empty folders. You should be able to restore the original file structure based on the filelist. Make sure the filelist lists files, folders and eventually symbolic links (hyperlinks to files stored elsewhere)."><i>[recommended]</i></span>|Open a terminal and run <a href="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/tree/main/Referenced%20Files/Scripts/create_filetree_filelist_powershell_option2.ps1">this script.</a>|On Linux, open a terminal and run <a href="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/tree/main/Referenced%20Files/Scripts/create_filetree_filelist_linux_bash_option2.txt">this script.</a></br></br>On Mac, open a terminal and run <a href="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/tree/main/Referenced%20Files/Scripts/create_filetree_filelist_mac_bash_option2.txt">this script.</a>|

|Task||
|----|---------|
|Delete system files <span title="The SCALA digital repository contains a delete system files function. However, including system files in your SIP includes a heavier METS-file. It is recommended to delete these before adding them in RODA-In."><i>[recommended]</i></span>|Make sure to only execute this step after Create a filelist and filetree [recommended].</br>Manually delete system files.|

</details>

###
<details><summary><b>Descriptive Metadata Requirements</b></summary>

[Requirements for descriptive metadata.](https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Descriptive%20Metadata%20Requirements.md)

</details>

###
<details><summary><b>RODA-In SIP creation</b></summary>

Make sure you install and configure RODA-In according to the [RODA-In Installation & Configuration](https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/RODA-In%20Installation%20&%20Configuration.md) instructions.
	
|Task||
|----|---------|
|<span title="Bear in mind that Roda-In deletes empty folders without a log. If you need a work around for this issue, see other pre-ingest steps “Create a filelist and filetree for each SIP”."><i>Load your TS in RODA-In</i></span>|Choose the working folder in your file system. This will serve as the root of your project.<br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Picture8.png">|
|Create a new classification scheme|Click to create a new classification scheme.</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Picture9.png">|
|Add the TS to the IP panel|Select the root folder of your TS.</br>Add this folder to the IP panel by clicking “Associate” or by dragging it to the IP panel.</br>You can also choose to select and add folders/files individually.</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Picture10.png">|
|<span title="This will determine how (S)IPs will be associated with eachother (e.g. are two IPs siblings or parent-child)."><i>Select an association method</i></span>|Choose the association method <span title="We may explore other SIP/AIP association methods in the future."><i>“One information package for each selected files or folders”</i></span>.</br>Click on the button “Continue”.</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Picture11.png">|
|Add descriptive metadata|Option 1: Create new metadata from a template.</br>Select option 1.</br>Select the descriptive metadata standard/type of your choice.</br>Click “Continue”.</br></br>Option 2: Load metadata from a single file.</br>Select option 2.</br>Select and add the descriptive metadata file.</br>Select the descriptive metadata standard/type of your file.</br>Click “Continue”.</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Picture12.png">|
|Edit descriptive metadata [optional]|Make changes to the metadata file using the tool.</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Picture13.png">|
|Add more representations of the data [optional]|Click “Add representation”.</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Picture14.png">|
|Add documentation [optional]|Click on “Documentation”.</br>Drop files or folders from your file explorer to add documentation.</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Picture15.png">|
|Create SIP(s)|Click “Create SIP(s)”.</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Picture16.png"></br>On the popup screen, select the following options:</br>1. Export all items - toggle this off if you only want to create a SIP from the currently selected IP. Toggle on if you want to create SIPs for all IPs in the IP (middle) panel. Toggle off by default.</br>2. Include hierarchy - toggle on to keep relationships between SIPs in their METS (e.g. siblings, parent-child). Toggle on by default.</br>3. Create inventory report - toggle on to make a list of all items contained per SIP. Toggle off by default.</br>4. Output directory - select where the SIP(s) will be saved.</br>5. SIP format - select E-ARK2.</br>6. SIP names - select Title + ID. This will render the SIP(s) easy to work with later on.</br>Newer versions of RODA-In also require you to add a submitter name and a submitter ID. Simply enter your name; if you don't have an ID from your organization, just enter your name again in the ID field.</br>Click “Start” to create the SIP(s).</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Picture17.png">|

|Task||
|----|-----|
|Using your repository classification scheme|You can download the AIP structural information from your repository. This is called the classification scheme. To use the classification scheme, go to RODA menu Ingest > Pre-ingest and download the classification scheme.</br>![image](https://user-images.githubusercontent.com/87436774/153401950-526493a0-3d97-4f13-ae4d-e2f15c316d46.png)</br>Then you can for example load it into RODA-In, and then you can drag'n'drop SIPs to a specific node under your organization.</br>![image](https://user-images.githubusercontent.com/87436774/153402235-de857e98-f0ce-4568-9ac9-5de7af76ce01.png)</br>Click the load button in RODA-In and then select the classification scheme json file you downloaded from RODA.|

</details>

## Ingestion

###
<details><summary><b>RODA account, FTP client and meemoo connection</b></summary>

|Task||
|----|-----|
|Request a RODA account|Ask your organization’s admin to create an account for you.|
|Log into RODA|Log into <a href="https://scala.meemoo.be/#login/welcome">RODA</a> using your username and password.|
	
Your organization's administrator can add you to the ingest-user account group. Then you should receive email confirmation for each finished ingest job.
	
The File Transfer Protocol (FTP) is a standard communication protocol used for the transfer of files between computers.
This is better suited to transfer large SIPs to RODA instead of using their website.

|Task|Win10|Mac/Linux|
|----|-----|---------|
|Download and install an FTP client|You can choose whichever client you wish. Here is one option:</br><a href="https://winscp.net/eng/download.php">Download WinSCP</a>.</br>Install WinSCP.|You can choose whichever client you wish. Here is one option:</br><a href="https://filezilla-project.org/download.php?platform=osx">Download FileZilla</a>.</br>Install FileZilla.|

|Task||
|----|-----|
|Connect to RODA on meemoo via FTP|Create a <a href="https://accounts-qas.meemoo.be/pwm/public/ForgottenPassword">meemoo user account</a>.</br>Open your FTP client.</br>Use settings:</br>* File protocol: SFTP</br>* Host name: 193.190.71.178 OR scala-sftp.meemoo.be</br>* Port number: 22</br>* User name: [your meemoo username]</br>* Password: [your meemoo password]</br></br>Login and connect to the server.</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Picture18.png">|

</details>

###
<details><summary><b>RODA AIP creation</b></summary>

|Task||
|----|-----|
|Upload SIPs via FTP|Upload SIPs via your FTP client.</br>Follow the guidelines in <a href="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/tree/main/Referenced%20Files/Dropfolder%20-%20User%20guide.pdf">this user guide</a>.</br></br>Here is a short version:</br>1. Create a .ready file locally on your computer.</br>Call the file ".ready". You might have to use your FTP program or a terminal to create this special file. If you have issues creating this file, please contact jelle.kleevens@vai.be.</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Screenshot_4.png"></br>2. Create a job folder for your SIPs on the server.</br>On the RODA/meemoo server side of your FTP program, navigate to the "incoming" folder. Then navigate to the folder of your institution/company (if there is no such folder, just remain in the "incoming" folder).</br>Create a new "job" folder. Give it any name you want. This folder will contain all SIPs to be uploaded in this job.</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Screenshot_6.png"></br>Then navigate into this new job folder.</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Screenshot_7.png"></br>3. Load your SIPs into the job folder.</br>Wait until all SIPs have loaded before going to the next step.</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Screenshot_8.png"></br>4. Drag the .ready file into the job folder.</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Screenshot_9.png"></br>After they are uploaded, access SIPs via the RODA website.
|Monitor the status of the ingest workflow process|1. Go to the “Process” page.</br>2. Check the status of the ingest process.</br><img src="https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/Referenced%20Files/Pictures/Picture24.png">|

Alternatively, you can [upload and ingest SIPs via HTTPS](https://github.com/Automatic-Ingest-Digital-Archives/SCALA/blob/main/RODA%20Manual%20Ingestion%20Via%20HTTPS.md), however it is not recommended.

|Task||
|----|-----|
|Restart failed/interrupted ingest processes|You can go to Ingest > Transfer and search for the content you have uploaded. Then choose "Select all pages" and then "Start new process". There you need to select the same ingest parameters, including Parent node, OR identifier and ingest finished email notification.|

	
</details>

###
<details><summary><b>RODA AIP assessment</b></summary>

|Task||
|----|-----|
|AIP assessment|![image](https://user-images.githubusercontent.com/87436774/138085894-e06e3476-a3d7-4d9a-8eea-e122262d366f.png)</br>Assessment is the process of determining whether records and other materials have permanent (archival) value. Assessment may be done at the collection, creator, series, file, or item level.|

</details>
